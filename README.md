# Magento2-AtosSips-Sherlock-LCL

LCL Sherlock payment gateway for Magento 2


***Full version of the module is available [on magento marketplace](https://marketplace.magento.com/madit-sips2.html).***


Tested on Magento 2.1.6 - 2.4.0 (***Pro version of the module is available [Here](https://www.madit.fr/shop/product/worldline-sips2-module-for-magento-2-6)***)


**The module now supports SIPS 2.0 API since SIPS 1.0 API will no longer be supported by worldline by the end of December 2021 ([more info](https://documentation.sips.worldline.com/en/announcements/end-sips-10.html)).**
None the less merchants who have not migrated yet can still continue to use the v 1.0 of the API through the configuration menu.
However, it is strongly recommended to proceed with the migration as soon as possible.

![sips2-migration](https://user-images.githubusercontent.com/3765910/116287004-2dc5d080-a790-11eb-8f46-f8226abc2899.png)
 


## Instructions for SIPS v2.0
As display on the screenshot above, merchant using the v 2.0 of the API can discard the instructions for v1.0 setup.
They will only require the `merchant_id` and the `secret_key` associated to have the module working.
Also, special attention should be paid to the SIPS version setting in the backoffice:
 - **SIPS 1.0**, to use the SIPS version 1 protocol
 - **SIPS 2.0 (migration)** for merchants who have migrated from v 1.0 to v 2.0 interface keeping their merchant_id
 - **SIPS 2.0 (transacationReference)** for merchants whose subscription begun under the v 2.0 premises and the shop is in transactionReference mode
 - **SIPS 2.0 (auto)** for merchants whose subscription begun directly  the v 2.0 premises and whose TransactionReference should be generated by WL sips API.
 
[Here's the list of credit cards](https://documentation.sips.worldline.com/fr/cartes-de-test.html) that you can use on test environment.

## Instructions for SIPS v1.0
Copy ```Madit/Atos/view/res/atos_standard/logo``` into you media dir ```MAGENTO_DIR/pub/media/atos_standard```.
```shell
 mkdir ${MAGENTO_DIR}/pub/media/atos_standard
 cp Madit/Atos/view/res/atos_standard/logo ${MAGENTO_DIR}/pub/media/atos_standard
```
The merchant files are to be placed in ``` Madit/Atos/view/res/atos_standard/param```.
The  `pathfile` will be automatically generate in the param dir during the first order processing (checkout the wiki for manual setting).
The module can be configured through admin dashboard *store>configurations>sales>payment gateway*.

Test accepted transaction infos:

```
CB Number : 4525485465452100
Expires : 01 2022
3 back digits : 100
```

Installation
============

```php bin/magento module:enable Madit_Atos```

 [Tutoriel d'installation et de configuration en fran√ßais](https://www.madit.fr/r/Q1P)

known issues
============
It may be, depending on your os, necessary to switch the binaries in ```view/res/atos_standard/bin/static``` by the ones in `alt-static` or the glib dir.
